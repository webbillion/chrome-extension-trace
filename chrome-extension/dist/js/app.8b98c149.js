(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],p=0,f=[];p<i.length;p++)o=i[p],a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"22da":function(e,t,n){"use strict";var r=n("f300"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("ac6a");var r=n("4778"),a=n.n(r),s=n("0867"),o=n.n(s),i=n("955d"),c=n.n(i),u=n("c3a4"),l=n.n(u),p=n("f85f"),f=n.n(p),h=n("96bb"),d=n.n(h),m=(n("cadf"),n("551c"),n("097d"),n("2b0e")),g=(n("97a6"),n("d09c")),v=n.n(g),b=(n("e1e6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Content")],1)}),w=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("mu-icon",{directives:[{name:"show",rawName:"v-show",value:e.showHelpContent,expression:"showHelpContent"}],staticClass:"close-button",attrs:{value:"close",size:"16"},on:{click:function(t){e.showHelpContent=!1}}}),n("section",{directives:[{name:"show",rawName:"v-show",value:e.showHelpContent,expression:"showHelpContent"}],staticClass:"help"},[n("h3",[e._v("什么是阅读模式？")]),e._m(0),e._m(1),n("p",[e._v("此外两者不可共存，将阅读模式从电子书更改为长网页后会单独保存，此前的电子书目录依然存在。")])]),n("mu-slide-top-transition",{attrs:{name:"ss"}}),n("section",{directives:[{name:"show",rawName:"v-show",value:!e.showHelpContent,expression:"!showHelpContent"}],staticClass:"action"},[n("div",{staticClass:"switch flex",on:{click:function(e){e.stopPropagation()}}},[n("label",{attrs:{for:""}},[e._v("记住此网页")]),n("mu-switch",{attrs:{color:"#13ce66"},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}})],1),n("mu-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.remember,expression:"remember"}],staticClass:"sub-action"},[n("mu-checkbox",{staticClass:"auto-check",attrs:{slot:"actions",label:"不再自动提示",color:"#13ce66"},slot:"actions",model:{value:e.config.notAuto,callback:function(t){e.$set(e.config,"notAuto",t)},expression:"config.notAuto"}}),n("h4",{staticClass:"sub-action-title"},[n("span",[e._v("阅读模式")]),n("mu-icon",{staticClass:"sub-action-help",attrs:{title:"不明白？点击查看帮助",value:"help_outline",size:"14"},on:{click:e.handleClickHelp}})],1),n("div",{staticClass:"sub-action-content"},[n("div",{staticClass:"option-container",class:{selected:e.mode===e.MODE.LONG},on:{click:function(t){e.handleSelectMode(e.MODE.LONG)}}},[n("mu-ripple",{staticClass:"option-title flex flex-between-center"},[n("p",[e._v("长网页")]),n("mu-icon",{attrs:{value:"done",color:"#89e7b3"}})],1)],1),n("div",{staticClass:"option-container",class:{selected:e.mode===e.MODE.BOOK},on:{click:function(t){e.handleSelectMode(e.MODE.BOOK)}}},[n("mu-ripple",{staticClass:"option-title flex flex-between-center"},[n("p",[e._v("电子书")]),n("mu-icon",{attrs:{value:"done",color:"#89e7b3"}})],1)],1)])],1)])],1),n("section",{directives:[{name:"show",rawName:"v-show",value:!e.showHelpContent,expression:"!showHelpContent"}]},[n("h4",{staticClass:"sub-action-title"},[e._v("阅读历史")]),e._l(e.records,function(e,t){return n("ReadRecord",{key:e.id+t,attrs:{record:e,index:t}})})],2)],1)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("strong",[e._v("长网页")]),e._v("是将本网页视为独立的内容，单独保存阅读记录。")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("strong",[e._v("电子书")]),e._v("是将本网页和本网页所在目录下的所有网页当做一本电子书，只会保存一项阅读记录。")])}],y=n("be94"),R=(n("96cf"),n("1da1")),k=n("ade3"),C=(n("f751"),n("55dd"),n("34ef"),n("4917"),n("a481"),n("28a5"),n("b43a")),_=n.n(C),j={LONG:"LONG",BOOK:"BOOK",ALL:"ALL"},H="RECORDS_KEY";n("3b2b"),n("456d");function M(e){return Object.keys(e).map(function(t){return e[t]})}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";if(!e)return"";"string"===typeof e&&(e=new Date(e.replace(/-/g,"/"))),"number"===typeof e&&(e=new Date(e));var n={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours()%12===0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};for(var a in/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+r[e.getDay()+""])),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}function L(e){return new Promise(function(t){chrome.storage.local.get(e,function(n){t(n[e])})})}function A(e){return new Promise(function(t){chrome.storage.local.set(e,function(){t(e)})})}function N(e){return new Promise(function(t){chrome.storage.local.remove(e,function(){t(e)})})}var D={getItem:function(e){return L(e)},removeItem:function(e){return N(e)},setItem:function(e,t){return this[e]=t,A(Object(k["a"])({},e,t))}},P=new _.a(D);function $(){return S.apply(this,arguments)}function S(){return S=Object(R["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",P.getItemAsync(H));case 1:case"end":return e.stop()}},e,this)})),S.apply(this,arguments)}window.serializeStorageInstance=P;var G={toArray:!1,filter:function(){return!0},sort:function(e,t){return new Date(t.lastHistory.date)-new Date(e.lastHistory.date)}};function K(){return B.apply(this,arguments)}function B(){return B=Object(R["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},t=Object(y["a"])({},G,t),e.next=4,P.getItemAsync(H);case 4:return n=e.sent,r=n&&n.value,r&&(a=M(r),a=a.filter(t.filter),t.toArray?(a=a.sort(t.sort),r=a):(r={},a.forEach(function(e){return r[e.id]=e}))),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)})),B.apply(this,arguments)}function I(e){return e=e.split("?")[0],e.replace(/\/[^\/]*$/,"/")}function Y(e,t){return T.apply(this,arguments)}function T(){return T=Object(R["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=t.split("?")[0],n!==j.LONG){e.next=3;break}return e.abrupt("return",t);case 3:if(n!==j.BOOK){e.next=5;break}return e.abrupt("return",I(t));case 5:return e.next=7,z(t);case 7:if(r=e.sent,!r||!r.mode){e.next=10;break}return e.abrupt("return",t);case 10:return e.next=12,z(I(t));case 12:if(r=e.sent,!r||!r.mode){e.next=15;break}return e.abrupt("return",I(t));case 15:case"end":return e.stop()}},e,this)})),T.apply(this,arguments)}function z(e){return U.apply(this,arguments)}function U(){return U=Object(R["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return n=e.sent,e.abrupt("return",(n||{})[t]);case 4:case"end":return e.stop()}},e,this)})),U.apply(this,arguments)}function q(e,t){return F.apply(this,arguments)}function F(){return F=Object(R["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y(t,n);case 2:return r=e.sent,e.abrupt("return",z(r));case 4:case"end":return e.stop()}},e,this)})),F.apply(this,arguments)}function J(e){return W.apply(this,arguments)}function W(){return W=Object(R["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return n=e.sent,r=n.value,a=r[t.id],a?(10===a.history.length&&a.history.shift(),a.history.push(t.lastHistory)):(a={},r[t.id]=a),Object.assign(a,t),e.abrupt("return",n.save());case 8:case"end":return e.stop()}},e,this)})),W.apply(this,arguments)}function Q(e,t){return V.apply(this,arguments)}function V(){return V=Object(R["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y(t,n);case 2:return e.t0=e.sent,e.t1=n,e.t2=[],e.t3=I(t),e.t4={},e.t5={},r={id:e.t0,mode:e.t1,scrollEl:"document",history:e.t2,bookId:e.t3,lastHistory:e.t4,config:e.t5},e.abrupt("return",J(r));case 10:case"end":return e.stop()}},e,this)})),V.apply(this,arguments)}function X(e,t,n){return Z.apply(this,arguments)}function Z(){return Z=Object(R["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,n===j.LONG?n:r||n);case 2:if(a=e.sent,!a){e.next=19;break}if(r!==j.LONG){e.next=15;break}return a.mode="",e.next=8,z(a.bookId);case 8:if(s=e.sent,!s){e.next=13;break}return s.mode=n,e.next=13,J(s);case 13:e.next=16;break;case 15:a.mode=n;case 16:return e.abrupt("return",J(a));case 19:return e.abrupt("return",Q(t,n));case 20:case"end":return e.stop()}},e,this)})),Z.apply(this,arguments)}function ee(){return new Promise(function(e){chrome.tabs.query({active:!0},function(t){return e(t[0].url)})})}function te(){return/http/.test(document.URL)?document.URL:ee()}function ne(e){return re.apply(this,arguments)}function re(){return re=Object(R["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,j.LONG);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(n=e.t0,!n.mode){e.next=8;break}return e.abrupt("return",n.mode);case 8:return e.next=10,q(t,j.BOOK);case 10:if(e.t1=e.sent,e.t1){e.next=13;break}e.t1={};case 13:return n=e.t1,e.abrupt("return",n.mode||"");case 15:case"end":return e.stop()}},e,this)})),re.apply(this,arguments)}function ae(e){return se.apply(this,arguments)}function se(){return se=Object(R["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,j.LONG);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(n=e.t0,!n.mode||!n.config){e.next=8;break}return e.abrupt("return",n.config);case 8:return e.next=10,q(t,j.BOOK);case 10:if(e.t1=e.sent,e.t1){e.next=13;break}e.t1={};case 13:return n=e.t1,e.abrupt("return",n.config||{});case 15:case"end":return e.stop()}},e,this)})),se.apply(this,arguments)}function oe(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(R["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(t,j.LONG);case 2:if(r=e.sent,r&&r.mode){e.next=10;break}return e.next=6,q(t,j.BOOK);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:r=e.t0;case 10:if(!r.mode||!r.config){e.next=13;break}return Object.assign(r.config,n),e.abrupt("return",J(r));case 13:case"end":return e.stop()}},e,this)})),ie.apply(this,arguments)}var ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"record-link",attrs:{target:"_blank",href:e.record.url}},[n("div",{staticClass:"record-title flex flex-between-center",attrs:{title:e.record.title}},[n("p",{staticClass:"flex"},[n("img",{staticClass:"icon",attrs:{src:e.record.faviconUrl,alt:""}}),n("span",{staticClass:"title"},[e._v(e._s(e.record.title))])]),n("span",{staticClass:"date"},[e._v(e._s(e.record.date))])])]),n("div",{staticClass:"progress-container"},[n("mu-linear-progress",{attrs:{mode:"determinate",color:e.progressColor,value:e.record.percent,title:e.record.percent+"%"}}),e.showAnimateProgress?n("mu-linear-progress",{staticClass:"animate-progress",attrs:{value:e.record.percent,title:e.record.percent+"%",color:e.progressColor}}):e._e()],1)])},ue=[],le=(n("c5f6"),{props:{record:Object,index:Number},data:function(){return{animateProgress:1,progressColor:"#0f0",showAnimateProgress:!1}},computed:{progressPercent:function(){return this.record.percent}},mounted:function(){var e=this;setTimeout(function(){e.showAnimateProgress=!0},200*this.index)}}),pe=le,fe=(n("73bc"),n("2877")),he=Object(fe["a"])(pe,ce,ue,!1,null,"6212dd81",null);he.options.__file="ReadRecord.vue";var de=he.exports,me={LONG:"LONG",BOOK:"BOOK",ALL:"ALL"};function ge(e){return e.map(function(e){return e.lastHistory}).map(function(e){return e.percent=parseFloat(e.percent),e.date=E(e.date,"DD/MM HH:mm"),e})}var ve={name:"HelloWorld",components:{ReadRecord:de},props:{msg:String},data:function(){var e;return{MODE:me,remember:!1,showHelpContent:!1,mode:"",modes:(e={},Object(k["a"])(e,me.LONG,!1),Object(k["a"])(e,me.BOOK,!1),e),canHanldeModesChange:!0,records:[],config:{notAuto:!1}}},methods:{handleClickHelp:function(){this.showHelpContent=!this.showHelpContent},handleSelectMode:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.mode===t?"":t,e.t0=X,e.next=4,te();case 4:return e.t1=e.sent,e.t2=t,e.t3=this.mode,e.next=9,(0,e.t0)(e.t1,e.t2,e.t3);case 9:this.mode=t,this.getConfig(),this.getAllRecords();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getMode:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=ne,e.next=3,te();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:t=e.sent,t&&(this.remember=!0),this.mode=t;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getAllRecords:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K({toArray:!0,filter:function(e){return e.mode&&e.history.length}});case 2:t=e.sent,console.log(t),this.records=ge(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getConfig:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=ae,e.next=3,te();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:t=e.sent,this.config=Object(y["a"])({},this.config,t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},watch:{remember:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.handleSelectMode("");case 3:this.mode="";case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),config:{deep:!0,handler:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=oe,e.next=3,te();case 3:e.t1=e.sent,e.t2=this.config,(0,e.t0)(e.t1,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},created:function(){var e=Object(R["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getMode(),this.getAllRecords(),this.getConfig();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},be=ve,we=(n("22da"),Object(fe["a"])(be,x,O,!1,null,"251318d4",null));we.options.__file="Content.vue";var xe=we.exports,Oe={name:"app",components:{Content:xe}},ye=Oe,Re=(n("034f"),Object(fe["a"])(ye,b,w,!1,null,null,null));Re.options.__file="App.vue";var ke=Re.exports,Ce=(n("a4b1"),[d.a,f.a,l.a,v.a,c.a,o.a,a.a]);Ce.forEach(function(e){return m["a"].use(e)}),m["a"].config.productionTip=!1,new m["a"]({render:function(e){return e(ke)}}).$mount("#app")},"64a9":function(e,t,n){},"73bc":function(e,t,n){"use strict";var r=n("bb47"),a=n.n(r);a.a},a4b1:function(e,t,n){},bb47:function(e,t,n){},f300:function(e,t,n){}});
//# sourceMappingURL=app.8b98c149.js.map